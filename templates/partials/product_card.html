{% load static %}
<div class="col">
  <div class="card product-card h-100 shadow-sm">
    <a href="{% url 'clothing_detail' item_id=item.id %}" class="text-decoration-none d-block product-card-media-link">
      {% if item.model_3d_file and item.model_3d_file.url %}
        <model-viewer src="{{ item.model_3d_file.url }}" 
                      alt="{{ item.name }} 3D Model"
                      auto-rotate 
                      camera-controls
                      interaction-prompt="none"
                      style="width: 100%; height: 280px; background-color: #f0f0f0; cursor: pointer;">
          <div slot="progress-bar" class="progress-bar-custom"></div>
        </model-viewer>
      {% elif item.image_2d and item.image_2d.url %}
        <img src="{{ item.image_2d.url }}" class="card-img-top" alt="{{ item.name }}">
      {% else %}
        <img src="{% static 'images/placeholder.png' %}" class="card-img-top" alt="Placeholder for {{ item.name }}" style="background-color: #eee;">
      {% endif %}
    </a>
    <div class="card-body">
      <h5 class="card-title"><a href="{% url 'clothing_detail' item_id=item.id %}" class="text-dark text-decoration-none stretched-link">{{ item.name }}</a></h5>
      <p class="card-text text-muted small">{{ item.get_category_display }}</p>
      {% if item.price %}<p class="card-text fw-bold">â‚¹{{ item.price }}</p>{% endif %}</p>
    </div>
  </div>
</div>